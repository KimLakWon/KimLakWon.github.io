---
title: "컴퓨터구조 개념 정리"
date: 2019-05-16 17:42:28 -0400
categories: jekyll update
---

# 컴퓨터 구조

## 1. Introduction

 **1) CPU는 자신이 실행할 수 있는 명령어의 집합(instruction set)을 제공한다.**
 
 **2) 컴퓨터 계층**
- 반도체 기술 (LOW)
- 2진수 체계 및 논리회로 : 부울 대수, 게이트, 레지스터, 카운터
- 컴퓨터 조직 : 중앙처리장치, 기억장치, 시스템 버스
- 프로그래머 모델 : 레지스터 용도, 주소지정방식, 기억장치 구조, 데이터 형식, 명령어 집합
- 어셈블리 프로그램
- 고급언어 프로그램 (HIGH)

 **3) 논리회로를 설계함으로써 컴퓨터를 설계하는 사람들은 반도체 소자의 물리적 특성으로부터 해방된다.**
 
 **4) CPU = 제어장치 + 처리장치(레지스터 + 연산장치)**
 
 **5) 명령어 집합은 컴퓨터 HW와 SW를 연결하는 인터페이스라고 생각할 수 있다.**
 
 **6) 고급언어는 컴퓨터 구조와 독립적이다.**
 
 **7) 컴퓨터 = CPU+기억장치(디스크가 아니라 메모리, 명령어 집합 모아놓은것)+입출력장치+시스템 버스**
 
 **8) 시스템 버스는 주소, 데이터, 그리고 제어 신호를 전달하고, 한 개의 선이 한 비트를 전달한다.**
 
 **9) 무어의 법칙 : 반도체 집적회로의 성능이 18개월마다 2배로 증가한다.**
 
 **10) 세대별 컴퓨터**
- 1세대 컴퓨터 : 에니악, 언어도 없고 기억장치도 없고, 10진법에.. 10톤가까이 나감
- 2세대 컴퓨터 : 내장형 프로그램 도입, 트랜지스터 발명, ALGOL등 언어 사용
- 3세대 컴퓨터 : 반도체 IC 구현, PASCAL등 언어 사용, OS 개발
- 4세대 컴퓨터 : 마이크로프로세서, PC 등장
- 5세대 컴퓨터 : 미래의 컴퓨터
 
 **11) 마이크로프로세서 : 중앙처리장치의 기능을 한 개의 칩 안에 내장한 소자**

## 2. 논리회로 기초

1) 컴퓨터는 전기 신호의 흐름/끊김으로 수를 표현하기 때문에, 각 상태를 1과 0으로 대응시킨 수에 해당하는 2진수를 사용한다.

2) 코드는 각 원소를 서로 구분하기 위하여 부여한 숫자이다. 숫자 코드(BCD:10진수->2진수), 문자 코드(아스키코드, 유니코드), 명령어 코드가 있다.

3) 버퍼는 입력값과 출력값이 같은 논리회로. 실제로는 힘이 약한 신호를 힘이 센 신호로 변경하는 역할을 한다.

4) 빌딩블록이란, 규모가 큰 논리회로를 설계할 때 필요한 미리 만들어져 있는 부품들. 

5) 조합 논리회로의 빌딩블록
- 디코더 : 2개의 입력으로 4개의 결과, 
- 인코더 : 4개의 입력으로 2개의 결과,
- 멀티플렉서 : 4개의 입력, 1개의 출력,
- 디멀티플렉서 : 1개의 입력, 4개의 출력,
- 반가산기(HA) : 비트 2개로 합과 자리수올림 구함
- 전가산기(FA) : 비트 2개+올라온자리수로 합과 자리수올림 구함

6) 플립플롭 : 한 비트의 정보를 저장하는 기억 소자
- 클럭 주기에 맞춰 비트가 들어간다.
- 순차 논리회로에 필수로 들어있다.
- D, SR, JK, T 플립플롭이 있다.

7) 순차 논리회로의 빌딩블록
- 레지스터 : 여러개의 비트를 저장함 (여러개의 플립플롭) 
- 시프트 레지스터 : 병렬 데이터를 직렬로 출력하거나, 직렬로 입력되는 데이터를 모아 병렬 데이터로 변환하는 용도로 사용된다.
- 카운터 : 숫자를 셀 때 사용된다.

8) 마이크로오퍼레이션 : 컴퓨터는 한 개의 클럭 구간마다 수행하는 동작 (ex. T2 : R3 <- R1 + R2 )

3. 컴퓨터 구조의 개요

1) 명령어는 컴퓨터가 수행할 동작을 나타내는 부분(opcode)과 명령어가 처리할 데이터(operand)로 구성되어 있다.

2) 기계어와 어셈블리어는 프로세서의 종류마다 서로 다르다.

3) 프로그램 카운터(PC) : 다음에 실행할 명령어의 주소를 저장하는 레지스터

4) 명령어 레지스터(IR) : 현재 실행 중인 명령어를 저장하는 레지스터

5) 명령어는 데이터 전달, 데이터 처리, 프로그램 제어로 분류할 수 있다.

6) 기억장치의 용량은 기억장소의 수 X 데이터의 폭 으로 표현된다.

7) 컴퓨터는 입출력장치를 구별하기 위하여 장치마다 고유 번호를 할당하는데 그것을 입출력 포트라고 한다.

8) 입출력장치와 컴퓨터가 데이터를 주고 받는 방법 : programmed I/O, interrupt-driven I/O, DMA

9) 최근 컴퓨터 시스템은 브리지를 두어 버스를 계층적으로 구성한다. (중요도에 따라 시스템 버스, 입출력 버스, ..)

4. 중앙처리장치

1) 레지스터의 종류
- 제어용 레지스터 : PC, IR, MAR(기억장치 주소 레지스터), MBR(기억장치 버퍼 레지스터), 상태 레지스터
- 명령어 실행용 레지스터 : 데이터 레지스터, 주소 레지스터, 범용 레지스터
- 스택 포인터(SP) : 스택에 데이터가 채워진 마지막 위치를 가리키는 레지스터
- 베이스 레지스터(BP) : 스택의 한 기줌점을 가리키는 용도의 레지스터
- 인덱스 레지스터(IX) : 배열 순차적으로 접근할때 기억하려고 쓰는 레지스터

2) 인터럽트 : 컴퓨터의 정상적인 프로그램 실행을 방해하는 사건
- 내부 인터럽트 : 하드웨어 고장, 실행할 수 없는 명령어, 명령어 실행 오류, 사용 권한 위배...
- 외부 인터럽트 : 타이머 인터럽트, 입출력 인터럽트

3) 명령어 사이클 중 실행 단계가 끝날 때 마다 인터럽트 요청이 있는지 검사한다.

4) 인터럽트 처리 과정 : 요청 -> 확인 -> ISR -> 레지스터 저장 -> 처리 -> 레지스터 복구 -> 인터럽트 리턴(RETI)

5. 연산기

1) 연산기(ALU) : 중앙처리장치 안에서 실제로 데이터에 대한 사칙연산 및 시프트,논리 연산 등을 수행하는 부분.

2) 부동소수점 수 : 소수점의 위치가 고정되어 있지 않고 변하도록 표현하는 것.

3) 부호화 크기와 1의 보수는 변환이 쉽다는 편리성이 있으나, 0에 대한 표현이 두 가지라는 단점이 있기에 컴퓨터는 2의 보수를 사용한다. (그러면 가산기 하나로 덧셈 뺄셈이 가능하다)

4) 최상위 비트와 그 다음 상위 비트에서 발생한 자리 올림수 둘 중 하나가 1이면 오버플로우이다. ( Overflow = Cn XOR Cn-1 )

5) IEEE 754 : 부동소수점을 표현하기 위한 표준화 형식
- 32bit : 부호 1bit, 지수 8bit, 가수 23bit
- 64bit : 부호 1bit, 지수 11bit, 가수 52bit
- 지수는 biased, 가수는 맨 앞에 1을 빼고 넣는다.

6) 지수를 biased로 표현하는 이유는 만약 지수를 2의 보수로 표현할 때 마이너스가 나올 수 있기에 2^n-1을 더해서 부호 없는 수로 표현한다.

7) 컴퓨터는 정수를 2의 보수로 표현하므로 내부적으로 부호 있는 수와 부호 없는 수를 구별하지 않는다.

6. 명령어 집합

1) 명령어 형식
- 3-주소 명령어 형식 : 3개 Operand, RISC 프로세서에서 주로 사용
- 2-주소 명령어 형식 : 2개 Operand, CISC 프로세서에서 주로 사용

2) 단어를 기억장치에 저장하는 순서에 따른 방식
- 리틀 엔디언 : 주소값이 큰 위치에 무게가 큰 수를 저장 (Intel, ARM)
- 빅 엔디언 방식 : 주소값이 큰 위치에 무게가 작은 수를 저장 (MIPS, 인터넷)

3) 프로세서가 제공하는 주소지정방식과 명령어 수가 많으면 적은 명령어들로 구현할 수 있다는 
장점이 있지만, 구현이 복잡해진다는 단점이 있다.

7. 기억장치

1) 기억장치의 속도가 중앙처리장치보다 느리기 때문에 성능을 개선하기 위한 기법으로
액세스 속도를 개선하기 위한 캐시 기억장치와 용량 부족을 해결하기 위한 가상 기억장치가 사용되고 있다.

2) 온라인 연결 : 중앙처리장치가 필요할 때 항상 사용할 수 있다. (메인 메모리)
오프라인 연결 : 별도의 연결 과정을 거친 후 사용할 수 있다. (보조 기억장치)

3) 주기억장치 중 ROM은 전원이 제거되더라도 데이터가 저장되므로, 컴퓨터 처음 실행하는 부트로더를 저장하는 용도로 사용된다. (CD-ROM은 보조기억장치이다..)

4) 컴퓨터와 보조기억장치 간에 데이터를 전송하는 단위를 블록(block)이라고 한다. (512byte ~ 4Kbyte...)

5) 액세스 방법
- 순차 액세스 : 원하는 주소까지 처음부터 차례대로 액세스 해야 된다. (ex. 자기 테이프)
- 직접 액세스 : 헤드를 트랙과 섹터로 이동해서 직접 액세스 할 수 있다. (ex. 하드디스크, CD-ROM)
- 임의 액세스(랜덤 액세스) : 직접 액세스와 비슷하지만 모든 곳에서 액세스 시간이 같다. (ex. 메인 메모리) 
- 연관 액세스(CAM) : 키 값으로 테이블 비교, 고속 데이터 탐색, 비쌈 (ex. 캐시)

6) 전송률 : 1초에 액세스할 수 있는 데이터의 양, 단위는 bps(bits/sec)이다. = 대역폭

7) 컴퓨터는 기억장치를 계층적으로 구성하여, 자주 사용하는 데이터들을 속도가 빠른 기억장치로 옮겨 놓고 사용함으로써 속도를 개선한다.

8) 디스크 캐시 : 주기억장치와 보조기억장치끼리 데이터 전송하는 약간 버퍼같은 임무.. 디스크 캐시의 데이터는 안전한 시간에 디스크에 기록된다.

9) SRAM은 이진 셀이 플립플럽으로 만들어져있어 안정적(캐쉬에 사용), DRAM은 이진 셀이 캐패시터로 만들어져있어 방전됨. (메인메모리)

10) ROM,PROM,EPROM은 부트로더에 주로 사용되었지만, 1980년대 플래시 메모리가 출시되면서 그 자리가 대체되었다.

11) EEPROM은 시스템 설정 데이터를 저장하기 위한 용도로 주로 사용된다.

12) ROM은 주로 10만번 정도까지 재기록 할 수 있다.

13) ROM에 온라인으로 데이터를 기록할 수 없으므로 시스템 스택을 ROM에 배치할 수 없다.

14) SRAM은 일차원 배열, DRAM은 이차원 바둑판 배열 형태이다.

15) NOR 플래시는 주기억장치 처럼, NAND 플래시는 보조기억장치 처럼 사용한다.

16) 참조의 지역성 : 프로세서가 프로그램을 수행할 때 기억장치의 특정 부분을 집중적으로 참조하는 경향이 있는 특성
- 공간적 참조의 지역성 : 어느정도 인접한 영역에 계속 배치된다. EX.루프, 함수, 지역변수 등..
- 시간적 참조의 지역성 : 일정시간 내에 다시 참조될 가능성이 크다. EX. 함수 복귀, 루프 등..

17) 교체 정책
- LRU(Least Recently Used) : 최근에 가장 적게 사용된 라인을 교체, 카운터로 구현 (제일 많이 사용)
- FIFO(First-In-First-Out) : 캐시에 먼저 들어온 라인을 먼저 교체함. 즉, 오랬동안 존재했던 라인 교체, 카운터로 구현
- LFU(Least Frequently Used) : 가장 적게 참조되었던 라인을 교체, 최근 들어온 애는 무조건 당첨된다는 단점, 카운터로 구현
- 랜덤 : 신기하게, 제법 효율이 좋다.

18) 쓰기 정책 (읽기는 내용이 안바뀌니까 상관 없음)
- Write-through : 쓰기 동작이 수행될 때마다 캐시와 주기억장치 데이터를 바꾼다. 성능이 안좋다.
- Write-back : 쓰기 동작이 수행되면 캐시만 바꾸고 주기억장치는 바꾸지 않는다. 다만, dirty 비트에 표시해둔다. 성능이 좋다. 다만 불안전할 수 있다.

19) 멀티프로세서 시스템인 경우, 프로세서마다 독립적으로 기억장치를 액세스한다.

20) MESI(Modified,Exclusive,Shared,Invalid) 프로토콜 : 멀티프로세서 시스템에서 캐시와 주기억장치의 일관성을 유지하는 방법

8. 고성능 컴퓨터

 **1) 파이프라인은 컴퓨터가 명령어를 실행하는 명령어 사이클을 여러 단계로 나누고, 명령어를 다음 단계로 전달하면서, 각 단계를 동시에 실행하도록 운영하는 방법.**

 **2) 파이프라인의 단계를 세분화할수록 조합회로 부분의 지연시간을 줄일 수 있다.**

 **3) 파이프라인 실패 요인**
  - 분기 명령어의 실행 : 실행 단계에서 분기 여부가 결정되기 때문에 기다려야됨 -> 분기 예측을 하면 된다.
  - 자원 충돌 : 기억장치 모듈이 하나이기 때문에 같은 자원을 동시에 수행 못함. -> 하버드 구조로 바꾸면 된다.
  - 데이터 의존성 : 데이터끼리 서로 순서가 있음..  -> 우회경로를 포함하면 된다. 

 **4) 상태도 분기 예측은 두번 연속해서 예측이 틀렸을 때 예측을 변경한다. (정확도가 75%이상 유지됨..)**

 **5) 슈퍼스칼라 프로세서 : 명령어들 중에 동시에 실행할 수 있는 명령어를 찾아내어 동시에 실행시키는 것**

 **6) 병렬처리 컴퓨터는 여러 개의 프로세서가 한 개 또는 여러 개의 프로그램에 속한 명령어들을 동시에 처리할 수 있다.**

 **7) SIMD : 한 개의 명령어에 의하여 여러 개의 데이터를 처리할 수 있는 컴퓨터**

